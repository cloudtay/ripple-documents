---
title: 运行机制
description: 在ripple中,所有define的异步闭包都由EventLoop驱动, ripple对任何一个闭包的发生运行时都会特别声明与严格把控, 所有对于插件/组件的开发者也应该关心这点,防止闭包发生进程/纤程逃逸,运行黑洞的情况
keywords: [ 'ripple', 'PHP', '协程', '高性能', '高并发' ]
---

在ripple中,所有define的异步闭包都由EventLoop驱动, 它将会在恰当的时候运行指定事件, 通常情况下,
开发者无需过于关心EventLoop的处理机制, 只需做好流程的控制, 不同的闭包可能会在不同的`上下文空间`中被执行,
开发过程中应该注意这些上下文空间的约束

ripple对任何一个闭包的发生运行时都会特别声明与严格把控,所有高级开发者都应该特别关心这点以保证开发稳定的功能代码,
防止闭包发生进程/纤程逃逸, 运行黑洞的情况

### 主程运行时

框架的的使用者几乎不用关心该运行时,因为开发者的代码通常运行在`事件运行时`与`协程运行时`上下文
进程的入口点, 构建ripple的过程即是主程运行时, 它发生在ripple驱动机之前

### 事件运行时

> 事件运行时是由Revolt驱动的低级运行时,所有的事情从这发生,因此你需要注意它的约束

| 约束     | 异常包容            |
|--------|-----------------|
| 禁止有返回值 | 不包容任何异常,会导致程序退出 |

### 协程运行时

> 兼容所有异步操作

| 约束 | 异常包容          |
|----|---------------|
| 无  | 所有`Throwable` |

